# Changelog

このプロジェクトの全変更をこのファイルに記録します。

## [1.0.0] - 2026-01-28
### 追加 (Added)
- 初回リリース
- Firebase Hosting へのデプロイ


## [1.0.1] - 2026-01-29
### 追加 (Added)
- Firebase CRUD追加
- Firebase Analyticsを有効化


## [1.0.2] - 2026-02-3
### 追加 (Added)
- Firebase Authentication追加


## [1.0.3] - 2026-02-4
### 修正 (Fixed)
- **スマホ版Safariでの日付入力欄の視認性改善**
  - 課題：`input type="date"` が未選択時に空白で表示され、入力箇所であることが分かりにくかった。
  - 対策：CSSの `:invalid` 擬似クラスを用いて、未選択時に「日付を選択」というプレースホルダーを表示するよう変更。
  - 効果：直感的な操作が可能になり、UI/UXの向上を実現。


## [1.0.4] - 2026-02-04
### 変更 (Changed)
- **月間統計とランキングの連動機能の実装**
  - 課題：カレンダーの表示月を切り替えても、ランキングやグラフが全期間の合計を表示してしまっていた。
  - 対策：表示中の月（`viewDate`）の状態を `App.tsx`（親コンポーネント）にリフトアップ（状態の引き上げ）し、各コンポーネントで共有する構造に刷新。
  - 効果：カレンダーの月変更に合わせて、ランキングおよび棒グラフ（BarChart）が動的にフィルタリングされ、その月のデータのみを表示するように改善。

### 修正 (Fixed)
- **React フックの呼び出し順序の適正化**
  - ログイン状態の判定（早期リターン）より前に `useState` を定義するよう修正し、レンダリングエラーを解消。
  

## [1.0.5] - 2026-02-06
### 変更 (Changed)
- **学習記録フォームの日付入力仕様を変更**
  - 課題：日付選択UIは操作コストが高く、実利用（毎日の記録）では不要だった。
  - 対策：`input type="date"` を廃止し、当日の日付を自動表示する仕様に変更。
  - 実装：
    - フォーム上部に `TODAY : {date}` を表示
    - 日付はアプリ側で一元管理し、ユーザー入力を不要に
  - 効果：入力ステップが1つ減り、記録スピードとUXが向上。

### 改善 (Improved)
- **フォームUIの視認性向上**
  - 「TODAY : 日付」を横並びレイアウトに調整し、他の入力欄との一体感を強化。


## [1.1.1] - 2026-02-08
### 追加 (Added)
- **学習時間入力方式をタイマー計測方式に変更**
  - 課題：
    - 手動で学習時間を入力する方式では、計測の手間や入力ミスが発生しやすく、実際の学習体験と乖離していた。
    - 学習開始・終了の「行動」と記録が直結していなかった。
  - 対策：
    - 学習時間の手入力を廃止し、タイマーによる自動計測方式に変更。
    - 学習科目を選択後、再生（▶）ボタンで計測を開始し、停止（■）ボタン押下時点の経過時間を学習時間として確定する仕様を実装。
    - 計測された学習時間（秒数）を state として管理し、記録追加時に科目と紐づけて保存。
  - 効果：
    - 学習開始から記録までの操作フローが直感的になり、ユーザーの操作負荷を軽減。
    - 実際の学習行動に即した記録が可能となり、学習ログの信頼性と継続性が向上。

### 改善 (Improved)
- **フォーム責務の再整理**
  - タイマー計測ロジックを専用コンポーネントとして切り出し、入力フォームと分離。
  - 学習時間を「入力値」ではなく「計測結果」として扱う設計に変更し、state の責務を明確化。


### 修正 (Fixed)
- **時間データの管理単位を「秒（Integer）」へ統一**
  - 課題：
    - 以前の設計では学習時間を「分（Float）」で管理していたため、タイマーの秒数との変換過程で誤差が発生していた。
    - その結果、表示時に `NaN` が出力されたり、端数を含む不正確な時間表示になる不具合があった。
  - 対策：
    - アプリ全体のデータフローを「秒（整数値）」ベースに再設計。
    - 保存・集計・フィルタリング処理はすべて秒単位で統一し、表示直前でのみフォーマット変換を行う方式に変更。
    - 各表示コンポーネントにて「時：分：秒」および「時：分」形式へ変換するロジックを実装。
  - 効果：
    - `NaN` エラーを完全に解消。
    - タイマー計測値・記録リスト・統計データ間の整合性を100%担保。

- **時間表示形式の拡張（HH : MM : SS 対応）**
  - 課題：
    - 従来の `MM : SS` 表示では、1時間を超える学習記録を正しく表現できず、UI崩れの懸念があった。
  - 対策：
    - タイマーおよび学習記録リストの表示形式を `HH : MM : SS` に拡張。
    - 各桁をゼロパディングし、常に固定幅で表示する仕様に変更。
  - 効果：
    - 長時間学習時でも視認性とレイアウトの安定性を確保。

### 変更 (Changed)
- **統計コンポーネントの表示ロジック調整**
  - Ranking / Monthly：
    - 可読性を優先し、秒単位を切り捨てた上で「○時間 ○分」形式で表示するよう変更。
  - BarChart（ApexCharts）：
    - Y軸が「180m」などの過度に大きな分表記にならないよう、内部で時間換算を行い、
      フォーマッターにて「○h ○m」形式で表示する仕様に修正。
